{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import CircleIcon from'@mui/icons-material/Circle';// Material UI Circle Icon\nimport ExpandMoreIcon from'@mui/icons-material/ExpandMore';import ExpandLessIcon from'@mui/icons-material/ExpandLess';import VisibilityOffIcon from'@mui/icons-material/VisibilityOff';import VisibilityIcon from'@mui/icons-material/Visibility';import'../styles/DailyScheduleTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DailyScheduleTable(){const[scheduleData,setScheduleData]=useState([]);const[loading,setLoading]=useState(true);const[showRedBall,setShowRedBall]=useState(false);// State to toggle unscheduled visibility\nconst[showObserved,setShowObserved]=useState(false);// State to toggle observed visibility\n// Fetch daily schedule data\nuseEffect(()=>{axios.get('/api/daily_schedule').then(response=>{setScheduleData(response.data);setLoading(false);}).catch(error=>{console.error(\"Error fetching daily schedule:\",error);setLoading(false);});},[]);const toggleRedBallVisibility=()=>{setShowRedBall(!showRedBall);};const toggleObservedVisibility=()=>{setShowObserved(!showObserved);};const formatColumnValue=value=>{if(typeof value==='string'&&value.includes(',')){// Split the value and ensure all entries are identical\nconst splitValues=value.split(',');return splitValues.every(val=>val===splitValues[0])?splitValues[0]:value;}return value||'N/A';};const getStatusIcon=status=>{const iconStyle={width:\"12px\",height:\"12px\",margin:\"0\",padding:\"0\"};if(status===\"observed\"){return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"green\"}});}if(status===\"scheduled\"){return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"#FFBF00\"}});}if(status===\"unscheduled\"&&showRedBall){return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"red\"}});}return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"gray\"}});};// Filter rows based on `showRedBall` and `showObserved` state\nconst filteredScheduleData=scheduleData.filter(row=>{if(!showRedBall&&row.status===\"unscheduled\")return false;if(!showObserved&&row.status===\"observed\")return false;return true;});if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Daily Observing Schedule\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleRedBallVisibility,children:[showRedBall?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:showRedBall?'Hide Unscheduled':'Show Unscheduled'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleObservedVisibility,children:[showObserved?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:showObserved?'Hide Observed':'Show Observed'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"collapsible-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"compact-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Object Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dec\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Exp Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Count\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Obs Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Spec Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"nTel\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Obj Type\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredScheduleData.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.objname}),/*#__PURE__*/_jsx(\"td\",{children:row.RA}),/*#__PURE__*/_jsx(\"td\",{children:row.De}),/*#__PURE__*/_jsx(\"td\",{children:formatColumnValue(row.exptime)}),/*#__PURE__*/_jsx(\"td\",{children:formatColumnValue(row.count)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.status)}),/*#__PURE__*/_jsx(\"td\",{children:row.obs_starttime}),/*#__PURE__*/_jsx(\"td\",{children:row.obsmode||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.specmode||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.ntelescope||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.objtype||'N/A'})]},index))})]})})})]});}export default DailyScheduleTable;","map":{"version":3,"names":["React","useState","useEffect","axios","CircleIcon","ExpandMoreIcon","ExpandLessIcon","VisibilityOffIcon","VisibilityIcon","jsx","_jsx","jsxs","_jsxs","DailyScheduleTable","scheduleData","setScheduleData","loading","setLoading","showRedBall","setShowRedBall","showObserved","setShowObserved","get","then","response","data","catch","error","console","toggleRedBallVisibility","toggleObservedVisibility","formatColumnValue","value","includes","splitValues","split","every","val","getStatusIcon","status","iconStyle","width","height","margin","padding","style","color","filteredScheduleData","filter","row","children","className","onClick","map","index","objname","RA","De","exptime","count","obs_starttime","obsmode","specmode","ntelescope","objtype"],"sources":["/Users/dtak/Research/ToO/frontend/src/components/DailyScheduleTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport CircleIcon from '@mui/icons-material/Circle'; // Material UI Circle Icon\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport '../styles/DailyScheduleTable.css';\n\nfunction DailyScheduleTable() {\n    const [scheduleData, setScheduleData] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [showRedBall, setShowRedBall] = useState(false); // State to toggle unscheduled visibility\n    const [showObserved, setShowObserved] = useState(false); // State to toggle observed visibility\n\n    // Fetch daily schedule data\n    useEffect(() => {\n        axios.get('/api/daily_schedule')\n            .then((response) => {\n                setScheduleData(response.data);\n                setLoading(false);\n            })\n            .catch((error) => {\n                console.error(\"Error fetching daily schedule:\", error);\n                setLoading(false);\n            });\n    }, []);\n\n    const toggleRedBallVisibility = () => {\n        setShowRedBall(!showRedBall);\n    };\n\n    const toggleObservedVisibility = () => {\n        setShowObserved(!showObserved);\n    };\n\n    const formatColumnValue = (value) => {\n        if (typeof value === 'string' && value.includes(',')) {\n            // Split the value and ensure all entries are identical\n            const splitValues = value.split(',');\n            return splitValues.every((val) => val === splitValues[0]) ? splitValues[0] : value;\n        }\n        return value || 'N/A';\n    };\n\n    const getStatusIcon = (status) => {\n        const iconStyle = { width: \"12px\", height: \"12px\", margin: \"0\", padding: \"0\" };\n\n        if (status === \"observed\") {\n            return <CircleIcon style={{ ...iconStyle, color: \"green\" }} />;\n        }\n        if (status === \"scheduled\") {\n            return <CircleIcon style={{ ...iconStyle, color: \"#FFBF00\" }} />;\n        }\n        if (status === \"unscheduled\" && showRedBall) {\n            return <CircleIcon style={{ ...iconStyle, color: \"red\" }} />;\n        }\n        return <CircleIcon style={{ ...iconStyle, color: \"gray\" }} />;\n    };\n\n    // Filter rows based on `showRedBall` and `showObserved` state\n    const filteredScheduleData = scheduleData.filter((row) => {\n        if (!showRedBall && row.status === \"unscheduled\") return false;\n        if (!showObserved && row.status === \"observed\") return false;\n        return true;\n    });\n\n    if (loading) {\n        return <p>Loading data...</p>;\n    }\n\n    return (\n        <div className=\"container\">\n            <h3>Daily Observing Schedule</h3>\n\n            {/* Buttons in the same line */}\n            <div className=\"button-container\">\n                <div className=\"collapse-toggle\" onClick={toggleRedBallVisibility}>\n                    {showRedBall ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                    <span className=\"collapse-text\">\n                        {showRedBall ? 'Hide Unscheduled' : 'Show Unscheduled'}\n                    </span>\n                </div>\n                <div className=\"collapse-toggle\" onClick={toggleObservedVisibility}>\n                    {showObserved ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                    <span className=\"collapse-text\">\n                        {showObserved ? 'Hide Observed' : 'Show Observed'}\n                    </span>\n                </div>\n            </div>\n\n            {/* Collapsible Content */}\n            <div className=\"collapsible-content\">\n                <div className=\"table-container\">\n                    <table className=\"compact-table\">\n                        <thead>\n                            <tr>\n                                <th>Object Name</th>\n                                <th>RA</th>\n                                <th>Dec</th>\n                                <th>Exp Time</th>\n                                <th>Count</th>\n                                <th>Status</th>\n                                <th>Start Time</th>\n                                <th>Obs Mode</th>\n                                <th>Spec Mode</th>\n                                <th>nTel</th>\n                                <th>Obj Type</th>\n                            </tr> \n                        </thead>\n                        <tbody>\n                            {filteredScheduleData.map((row, index) => (\n                                <tr key={index}>\n                                    <td>{row.objname}</td>\n                                    <td>{row.RA}</td>\n                                    <td>{row.De}</td>\n                                    <td>{formatColumnValue(row.exptime)}</td>\n                                    <td>{formatColumnValue(row.count)}</td>\n                                    <td>{getStatusIcon(row.status)}</td>\n                                    <td>{row.obs_starttime}</td>\n                                    <td>{row.obsmode || 'N/A'}</td>\n                                    <td>{row.specmode || 'N/A'}</td>\n                                    <td>{row.ntelescope || 'N/A'}</td>\n                                    <td>{row.objtype || 'N/A'}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default DailyScheduleTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}