{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import CircleIcon from'@mui/icons-material/Circle';// Material UI Circle Icon\nimport ExpandMoreIcon from'@mui/icons-material/ExpandMore';import ExpandLessIcon from'@mui/icons-material/ExpandLess';import VisibilityOffIcon from'@mui/icons-material/VisibilityOff';import VisibilityIcon from'@mui/icons-material/Visibility';import'../styles/DailyScheduleTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DailyScheduleTable(){const[scheduleData,setScheduleData]=useState([]);const[loading,setLoading]=useState(true);const[isCollapsed,setIsCollapsed]=useState(false);// State to manage collapse\nconst[showRedBall,setShowRedBall]=useState(false);// State to toggle unscheduled visibility\n// Fetch daily schedule data\nuseEffect(()=>{axios.get('/api/daily_schedule').then(response=>{console.log(\"Fetched data:\",response.data);// Debugging: Log fetched data\nsetScheduleData(response.data);setLoading(false);}).catch(error=>{console.error(\"Error fetching daily schedule:\",error);setLoading(false);});},[]);const toggleCollapse=()=>{setIsCollapsed(!isCollapsed);};const toggleRedBallVisibility=()=>{setShowRedBall(!showRedBall);};const formatColumnValue=value=>{if(typeof value==='string'&&value.includes(',')){// Split the value and ensure all entries are identical\nconst splitValues=value.split(',');return splitValues.every(val=>val===splitValues[0])?splitValues[0]:value;}return value||'N/A';};const getStatusIcon=status=>{const iconStyle={width:\"12px\",height:\"12px\",margin:\"0\",padding:\"0\"};if(status===\"observed\"){return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"green\"}});}if(status===\"unscheduled\"&&showRedBall){return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"red\"}});}return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"gray\"}});};// Filter rows based on `showRedBall` state\nconst filteredScheduleData=Array.isArray(scheduleData)?showRedBall?scheduleData:scheduleData.filter(row=>row.status!==\"unscheduled\"):[];if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"});}if(!Array.isArray(scheduleData)||scheduleData.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"No data available.\"});// Handle case when no data is available\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Daily Observing Schedule\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleCollapse,children:[isCollapsed?/*#__PURE__*/_jsx(ExpandMoreIcon,{}):/*#__PURE__*/_jsx(ExpandLessIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:isCollapsed?'Show Daily Schedule':'Hide Daily Schedule'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleRedBallVisibility,children:[showRedBall?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:showRedBall?'Hide Unscheduled':'Show Unscheduled'})]})]}),!isCollapsed&&/*#__PURE__*/_jsx(\"div\",{className:\"collapsible-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"compact-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Object Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dec\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Exp Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Count\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Obs Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Spec Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"nTel\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Obj Type\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredScheduleData.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.objname}),/*#__PURE__*/_jsx(\"td\",{children:row.RA}),/*#__PURE__*/_jsx(\"td\",{children:row.De}),/*#__PURE__*/_jsx(\"td\",{children:formatColumnValue(row.exptime)}),/*#__PURE__*/_jsx(\"td\",{children:formatColumnValue(row.count)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.status)}),/*#__PURE__*/_jsx(\"td\",{children:row.obs_starttime}),/*#__PURE__*/_jsx(\"td\",{children:row.obsmode||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.specmode||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.ntelescope||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:row.objtype||'N/A'})]},index))})]})})})]});}export default DailyScheduleTable;","map":{"version":3,"names":["React","useState","useEffect","axios","CircleIcon","ExpandMoreIcon","ExpandLessIcon","VisibilityOffIcon","VisibilityIcon","jsx","_jsx","jsxs","_jsxs","DailyScheduleTable","scheduleData","setScheduleData","loading","setLoading","isCollapsed","setIsCollapsed","showRedBall","setShowRedBall","get","then","response","console","log","data","catch","error","toggleCollapse","toggleRedBallVisibility","formatColumnValue","value","includes","splitValues","split","every","val","getStatusIcon","status","iconStyle","width","height","margin","padding","style","color","filteredScheduleData","Array","isArray","filter","row","children","length","className","onClick","map","index","objname","RA","De","exptime","count","obs_starttime","obsmode","specmode","ntelescope","objtype"],"sources":["/Users/dtak/Research/ToO/frontend/src/components/DailyScheduleTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport CircleIcon from '@mui/icons-material/Circle'; // Material UI Circle Icon\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport '../styles/DailyScheduleTable.css';\n\nfunction DailyScheduleTable() {\n    const [scheduleData, setScheduleData] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [isCollapsed, setIsCollapsed] = useState(false); // State to manage collapse\n    const [showRedBall, setShowRedBall] = useState(false); // State to toggle unscheduled visibility\n\n    // Fetch daily schedule data\n    useEffect(() => {\n        axios.get('/api/daily_schedule')\n            .then((response) => {\n                console.log(\"Fetched data:\", response.data); // Debugging: Log fetched data\n                setScheduleData(response.data);\n                setLoading(false);\n            })\n            .catch((error) => {\n                console.error(\"Error fetching daily schedule:\", error);\n                setLoading(false);\n            });\n    }, []);\n\n    const toggleCollapse = () => {\n        setIsCollapsed(!isCollapsed);\n    };\n\n    const toggleRedBallVisibility = () => {\n        setShowRedBall(!showRedBall);\n    };\n\n    const formatColumnValue = (value) => {\n        if (typeof value === 'string' && value.includes(',')) {\n            // Split the value and ensure all entries are identical\n            const splitValues = value.split(',');\n            return splitValues.every((val) => val === splitValues[0]) ? splitValues[0] : value;\n        }\n        return value || 'N/A';\n    };\n\n    const getStatusIcon = (status) => {\n        const iconStyle = { width: \"12px\", height: \"12px\", margin: \"0\", padding: \"0\" };\n\n        if (status === \"observed\") {\n            return <CircleIcon style={{ ...iconStyle, color: \"green\" }} />;\n        }\n        if (status === \"unscheduled\" && showRedBall) {\n            return <CircleIcon style={{ ...iconStyle, color: \"red\" }} />;\n        }\n        return <CircleIcon style={{ ...iconStyle, color: \"gray\" }} />;\n    };\n\n    // Filter rows based on `showRedBall` state\n    const filteredScheduleData = Array.isArray(scheduleData)\n        ? (showRedBall ? scheduleData : scheduleData.filter((row) => row.status !== \"unscheduled\"))\n        : [];\n\n    if (loading) {\n        return <p>Loading data...</p>;\n    }\n\n    if (!Array.isArray(scheduleData) || scheduleData.length === 0) {\n        return <p>No data available.</p>; // Handle case when no data is available\n    }\n\n    return (\n        <div className=\"container\">\n            <h2>Daily Observing Schedule</h2>\n\n            {/* Buttons in the same line */}\n            <div className=\"button-container\">\n                <div className=\"collapse-toggle\" onClick={toggleCollapse}>\n                    {isCollapsed ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                    <span className=\"collapse-text\">\n                        {isCollapsed ? 'Show Daily Schedule' : 'Hide Daily Schedule'}\n                    </span>\n                </div>\n                <div className=\"collapse-toggle\" onClick={toggleRedBallVisibility}>\n                    {showRedBall ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                    <span className=\"collapse-text\">\n                        {showRedBall ? 'Hide Unscheduled' : 'Show Unscheduled'}\n                    </span>\n                </div>\n            </div>\n\n            {/* Collapsible Content */}\n            {!isCollapsed && (\n                <div className=\"collapsible-content\">\n                    <div className=\"table-container\">\n                        <table className=\"compact-table\">\n                            <thead>\n                                <tr>\n                                    <th>Object Name</th>\n                                    <th>RA</th>\n                                    <th>Dec</th>\n                                    <th>Exp Time</th>\n                                    <th>Count</th>\n                                    <th>Status</th>\n                                    <th>Start Time</th>\n                                    <th>Obs Mode</th>\n                                    <th>Spec Mode</th>\n                                    <th>nTel</th>\n                                    <th>Obj Type</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {filteredScheduleData.map((row, index) => (\n                                    <tr key={index}>\n                                        <td>{row.objname}</td>\n                                        <td>{row.RA}</td>\n                                        <td>{row.De}</td>\n                                        <td>{formatColumnValue(row.exptime)}</td>\n                                        <td>{formatColumnValue(row.count)}</td>\n                                        <td>{getStatusIcon(row.status)}</td>\n                                        <td>{row.obs_starttime}</td>\n                                        <td>{row.obsmode || 'N/A'}</td>\n                                        <td>{row.specmode || 'N/A'}</td>\n                                        <td>{row.ntelescope || 'N/A'}</td>\n                                        <td>{row.objtype || 'N/A'}</td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default DailyScheduleTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}