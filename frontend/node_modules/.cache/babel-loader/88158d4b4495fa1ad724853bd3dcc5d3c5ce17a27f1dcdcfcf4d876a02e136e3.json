{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import CircleIcon from'@mui/icons-material/Circle';import ExpandMoreIcon from'@mui/icons-material/ExpandMore';import ExpandLessIcon from'@mui/icons-material/ExpandLess';import'../styles/StatusTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function StatusTable(){const[tableData,setTableData]=useState([]);const[filtInfo,setFiltInfo]=useState([]);const[latestReport,setLatestReport]=useState({});const[loading,setLoading]=useState(true);const[isDetailCollapsed,setIsDetailCollapsed]=useState(true);// State for collapse/expand\nuseEffect(()=>{// Fetch data from both endpoints\nconst fetchStatusData=axios.get('http://127.0.0.1:5000/api/status');const fetchFiltInfoData=axios.get('http://127.0.0.1:5000/api/filtinfo');Promise.all([fetchStatusData,fetchFiltInfoData]).then(_ref=>{let[statusResponse,filtInfoResponse]=_ref;setTableData(statusResponse.data.table);setLatestReport(statusResponse.data.latest_report);setFiltInfo(filtInfoResponse.data);setLoading(false);}).catch(error=>{console.error(\"Error fetching data:\",error);setLoading(false);});},[]);const getStatusIcon=status=>{const iconStyle={width:\"15px\",height:\"15px\",margin:\"0\",padding:\"0\"};if(status===\"operational\")return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"green\"}});if(status===\"maintanance\")return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"yellow\"}});if(status===\"offline\")return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"red\"}});return/*#__PURE__*/_jsx(CircleIcon,{style:{...iconStyle,color:\"gray\"}});};// Determine summary status for each telescope\nconst getSummaryStatus=row=>{const statuses=['Mount','Focuser','Filterwheel','Camera'].map(component=>row[component]);if(statuses.includes('offline'))return'offline';// Red if any component is offline\nif(statuses.includes('maintanance'))return'maintanance';// Yellow if any component is maintenance\nreturn'operational';// Green if all components are operational\n};// Merge tableData and filtInfo based on Telescope\nconst combinedData=tableData.map(statusRow=>{const filtInfoRow=filtInfo.find(filt=>filt.Telescope===statusRow.Telescope);return{...statusRow,Filters:filtInfoRow?filtInfoRow.Filters.join(', '):'No filters available'};});const toggleDetailCollapse=()=>{setIsDetailCollapsed(!isDetailCollapsed);};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading data...\"});}// Split the telescopes into two rows\nconst row1=tableData.slice(0,10);const row2=tableData.slice(10,20);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Current Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-grid\",children:[row1,row2].map((row,rowIndex)=>/*#__PURE__*/_jsx(\"div\",{className:\"summary-row\",children:row.map((telescope,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-telescope\",children:telescope.Telescope}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:getStatusIcon(getSummaryStatus(telescope))})]},index))},rowIndex))}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleDetailCollapse,children:[isDetailCollapsed?/*#__PURE__*/_jsx(ExpandMoreIcon,{}):/*#__PURE__*/_jsx(ExpandLessIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:isDetailCollapsed?'Show Detailed Status':'Hide Detailed Status'})]}),!isDetailCollapsed&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Telescope Status and Filter Information\"}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"5\",cellSpacing:\"0\",style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Telescope\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Focuser\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Filterwheel\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Camera\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Filters\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:combinedData.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.Telescope}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.Mount)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.Focuser)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.Filterwheel)}),/*#__PURE__*/_jsx(\"td\",{children:getStatusIcon(row.Camera)}),/*#__PURE__*/_jsx(\"td\",{children:row.Filters})]},index))})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"footer\",children:[\"Reported by \",latestReport.reported_by,\" on \",latestReport.timestamp]})]})]});}export default StatusTable;","map":{"version":3,"names":["React","useState","useEffect","axios","CircleIcon","ExpandMoreIcon","ExpandLessIcon","jsx","_jsx","jsxs","_jsxs","StatusTable","tableData","setTableData","filtInfo","setFiltInfo","latestReport","setLatestReport","loading","setLoading","isDetailCollapsed","setIsDetailCollapsed","fetchStatusData","get","fetchFiltInfoData","Promise","all","then","_ref","statusResponse","filtInfoResponse","data","table","latest_report","catch","error","console","getStatusIcon","status","iconStyle","width","height","margin","padding","style","color","getSummaryStatus","row","statuses","map","component","includes","combinedData","statusRow","filtInfoRow","find","filt","Telescope","Filters","join","toggleDetailCollapse","children","row1","slice","row2","className","rowIndex","telescope","index","onClick","border","cellPadding","cellSpacing","Mount","Focuser","Filterwheel","Camera","reported_by","timestamp"],"sources":["/Users/dtak/Research/ToO/frontend/src/components/StatusTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport CircleIcon from '@mui/icons-material/Circle';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport '../styles/StatusTable.css';\n\nfunction StatusTable() {\n    const [tableData, setTableData] = useState([]);\n    const [filtInfo, setFiltInfo] = useState([]);\n    const [latestReport, setLatestReport] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [isDetailCollapsed, setIsDetailCollapsed] = useState(true); // State for collapse/expand\n\n    useEffect(() => {\n        // Fetch data from both endpoints\n        const fetchStatusData = axios.get('http://127.0.0.1:5000/api/status');\n        const fetchFiltInfoData = axios.get('http://127.0.0.1:5000/api/filtinfo');\n\n        Promise.all([fetchStatusData, fetchFiltInfoData])\n            .then(([statusResponse, filtInfoResponse]) => {\n                setTableData(statusResponse.data.table);\n                setLatestReport(statusResponse.data.latest_report);\n                setFiltInfo(filtInfoResponse.data);\n                setLoading(false);\n            })\n            .catch((error) => {\n                console.error(\"Error fetching data:\", error);\n                setLoading(false);\n            });\n    }, []);\n\n    const getStatusIcon = (status) => {\n        const iconStyle = { width: \"15px\", height: \"15px\", margin: \"0\", padding: \"0\" };\n\n        if (status === \"operational\") return <CircleIcon style={{ ...iconStyle, color: \"green\" }} />;\n        if (status === \"maintanance\") return <CircleIcon style={{ ...iconStyle, color: \"yellow\" }} />;\n        if (status === \"offline\") return <CircleIcon style={{ ...iconStyle, color: \"red\" }} />;\n        return <CircleIcon style={{ ...iconStyle, color: \"gray\" }} />;\n    };\n\n    // Determine summary status for each telescope\n    const getSummaryStatus = (row) => {\n        const statuses = ['Mount', 'Focuser', 'Filterwheel', 'Camera'].map((component) => row[component]);\n        if (statuses.includes('offline')) return 'offline'; // Red if any component is offline\n        if (statuses.includes('maintanance')) return 'maintanance'; // Yellow if any component is maintenance\n        return 'operational'; // Green if all components are operational\n    };\n\n    // Merge tableData and filtInfo based on Telescope\n    const combinedData = tableData.map((statusRow) => {\n        const filtInfoRow = filtInfo.find((filt) => filt.Telescope === statusRow.Telescope);\n        return {\n            ...statusRow,\n            Filters: filtInfoRow ? filtInfoRow.Filters.join(', ') : 'No filters available',\n        };\n    });\n\n    const toggleDetailCollapse = () => {\n        setIsDetailCollapsed(!isDetailCollapsed);\n    };\n\n    if (loading) {\n        return <p>Loading data...</p>;\n    }\n\n    // Split the telescopes into two rows\n    const row1 = tableData.slice(0, 10);\n    const row2 = tableData.slice(10, 20);\n\n    return (\n        <div className=\"container\">\n            {/* Compact Summary Table */}\n            <h2>Current Status</h2>\n            <div className=\"summary-grid\">\n                {[row1, row2].map((row, rowIndex) => (\n                    <div key={rowIndex} className=\"summary-row\">\n                        {row.map((telescope, index) => (\n                            <div key={index} className=\"summary-item\">\n                                <div className=\"summary-telescope\">{telescope.Telescope}</div>\n                                <div className=\"summary-icon\">\n                                    {getStatusIcon(getSummaryStatus(telescope))}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                ))}\n            </div>\n\n            {/* Expand/Collapse Toggle */}\n            <div className=\"collapse-toggle\" onClick={toggleDetailCollapse}>\n                {isDetailCollapsed ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                <span className=\"collapse-text\">\n                    {isDetailCollapsed ? 'Show Detailed Status' : 'Hide Detailed Status'}\n                </span>\n            </div>\n\n            {/* Combined Table */}\n            {!isDetailCollapsed && (\n                <div>\n                    <h3>Telescope Status and Filter Information</h3>\n                    <table border=\"1\" cellPadding=\"5\" cellSpacing=\"0\" style={{ width: '100%' }}>\n                        <thead>\n                            <tr>\n                                <th>Telescope</th>\n                                <th>Mount</th>\n                                <th>Focuser</th>\n                                <th>Filterwheel</th>\n                                <th>Camera</th>\n                                <th>Filters</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {combinedData.map((row, index) => (\n                                <tr key={index}>\n                                    <td>{row.Telescope}</td>\n                                    <td>{getStatusIcon(row.Mount)}</td>\n                                    <td>{getStatusIcon(row.Focuser)}</td>\n                                    <td>{getStatusIcon(row.Filterwheel)}</td>\n                                    <td>{getStatusIcon(row.Camera)}</td>\n                                    <td>{row.Filters}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                    <p className=\"footer\">\n                        Reported by {latestReport.reported_by} on {latestReport.timestamp}\n                    </p>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default StatusTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}