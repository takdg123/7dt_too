{"ast":null,"code":"import _objectSpread from\"/Users/dtak/Research/ToO/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import axios from'axios';import'../styles/TargetForm.css';import{Autocomplete,Alert,TextField,Button,RadioGroup,FormControlLabel,Radio,Checkbox,Dialog,DialogTitle,DialogContent,DialogActions,Snackbar,CircularProgress}from'@mui/material';import'chartjs-adapter-date-fns';import{Chart as ChartJS,LinearScale,Title,Tooltip,ScatterController,LineController,LineElement,PointElement,CategoryScale,TimeScale,Legend}from'chart.js';import annotationPlugin from'chartjs-plugin-annotation';import ExpandMoreIcon from'@mui/icons-material/ExpandMore';import ExpandLessIcon from'@mui/icons-material/ExpandLess';import SpecMode from'./SpecMode';import DeepMode from'./DeepMode';import DetailedSettings from'./DetailedSettings';import CircleIcon from'@mui/icons-material/Circle';import moment from'moment-timezone';import ReactTooltip from\"react-tooltip\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(LinearScale,Title,Tooltip,ScatterController,LineController,LineElement,PointElement,CategoryScale,TimeScale,Legend,annotationPlugin);const TargetForm=()=>{var _weatherData$humidity,_weatherData$rainrate,_weatherData$skybrigh,_weatherData$temperat,_weatherData$windspee;const[targets,setTargets]=useState([]);const[target,setTarget]=useState('');const[ra,setRa]=useState('');const[dec,setDec]=useState('');const[exposure,setExposure]=useState('300');const[obsmode,setObsmode]=useState('Spec');const[comments,setComments]=useState('');const[abortObservation,setAbortObservation]=useState(false);// Track checkbox state\nconst[requester,setRequester]=useState('');// Track requester email\nconst[wavelengths,setWavelengths]=useState([]);const[filters,setFilters]=useState([]);const[specFileOptions,setSpecFileOptions]=useState(['specall.specmode']);const[selectedSpecFile,setSelectedSpecFile]=useState('specall.specmode');const[selectedFilters,setSelectedFilters]=useState(['g']);// For checkboxes\nconst[selectedTelNumber,setSelectedTelNumber]=useState(10);// For dropdown\nconst[staraltData,setStaraltData]=useState(null);const[isCustomTarget,setIsCustomTarget]=useState(true);const[isCollapsed,setIsCollapsed]=useState(true);// Collapse state for mode options\nconst[isDetailCollapsed,setIsDetailCollapsed]=useState(true);// Collapse state for mode options\nconst[isStaraltCollapsed,setIsStaraltCollapsed]=useState(false);// Collapse state for mode options\nconst[isDialogOpen,setIsDialogOpen]=useState(false);// Dialog state\nconst[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');const[detailedSettings,setDetailedSettings]=useState({singleFrameExposure:60,// Default 60 seconds\nimageCount:5,// Default exposure time / 60\npriority:50,// Default 50\ngain:2750,// Default 2750\nbinning:1,// Default 1\nobsStartTime:''// Default empty\n});const[telescopesOnline,setTelescopesOnline]=useState(0);// New state for telescope status\nconst[localTime,setLocalTime]=useState(moment().tz(\"America/Santiago\").format('YYYY-MM-DD HH:mm:ss'));const[weatherData,setWeatherData]=useState(null);const chartRef=useRef(null);const staraltChartRef=useRef(null);useEffect(()=>{axios.get('/api/targets').then(response=>setTargets(response.data)).catch(error=>console.error('Error fetching targets:',error));},[]);useEffect(()=>{if(obsmode==='Spec'){axios.get('/api/spec-options').then(response=>setSpecFileOptions(response.data)).catch(error=>console.error('Error fetching spec file options:',error));}},[obsmode]);useEffect(()=>{if(selectedSpecFile){axios.get(\"/api/spec-file?file=\".concat(selectedSpecFile)).then(response=>{setWavelengths(response.data.wavelengths);setFilters(response.data.filters);}).catch(error=>console.error('Error fetching spec file data:',error));}},[selectedSpecFile]);useEffect(()=>{axios.get('/api/status').then(response=>{const onlineTelescopes=response.data.table.filter(telescope=>telescope.Status!=='offline').length;setTelescopesOnline(onlineTelescopes);}).catch(error=>console.error('Error fetching telescope status:',error));},[]);useEffect(()=>{const raNum=parseFloat(ra);const decNum=parseFloat(dec);if(!isNaN(raNum)&&!isNaN(decNum)){const query=\"ra=\".concat(raNum,\"&dec=\").concat(decNum,\"&objname=\").concat(encodeURIComponent(target),\"&target_minalt=30&target_minmoonsep=40\");fetch(\"/api/staralt_data?\".concat(query)).then(response=>response.json()).then(data=>{setStaraltData(data);console.log(\"Received staralt data:\",data);}).catch(error=>console.error(\"Error fetching staralt data:\",error));}},[ra,dec,target]);useEffect(()=>{if(!staraltData||!staraltChartRef.current)return;const{objname,target_times,target_alts,moon_times,moon_alts,sun_times,sun_alts,color_target,tonight,target_minalt,target_minmoonsep}=staraltData;// Convert times to Date objects\nconst targetData=target_times.map((t,i)=>({x:new Date(t),y:target_alts[i]}));const moonData=moon_times.map((t,i)=>({x:new Date(t),y:moon_alts[i]}));const sunData=sun_times.map((t,i)=>({x:new Date(t),y:sun_alts[i]}));// Map color codes to CSS colors\nconst mappedColorTarget=color_target.map(c=>{if(c==='r')return'red';if(c==='k')return'black';if(c==='g')return'green';return c;// fallback if needed\n});// Convert night times to Date objects\nconst sunsetNight=new Date(tonight.sunset_night);const sunriseNight=new Date(tonight.sunrise_night);const sunsetCivil=new Date(tonight.sunset_civil);const sunriseCivil=new Date(tonight.sunrise_civil);const targetDataset={label:'Target',data:targetData,pointBackgroundColor:mappedColorTarget,borderColor:'black',showLine:false,pointRadius:2};const moonDataset={label:'Moon',data:moonData,borderColor:'blue',backgroundColor:'blue',showLine:false,pointRadius:1};const sunDataset={label:'Sun',data:sunData,borderColor:'red',backgroundColor:'red',showLine:false,pointRadius:1};const annotations={// Vertical line at night start\nnightStartLine:{type:'line',xMin:sunsetNight.getTime(),xMax:sunsetNight.getTime(),borderColor:'black',borderWidth:1,label:{enabled:true,content:'Night start',position:'start',yAdjust:-20}},// Vertical line at night end\nnightEndLine:{type:'line',xMin:sunriseNight.getTime(),xMax:sunriseNight.getTime(),borderColor:'black',borderWidth:1,label:{enabled:true,content:'Night end',position:'start',yAdjust:-20}},// Shaded nighttime region\nnightBox:{type:'box',xMin:sunsetNight.getTime(),xMax:sunriseNight.getTime(),yMin:0,yMax:90,backgroundColor:'rgba(0,0,0,0.3)',drawTime:'beforeDatasetsDraw'},// Shaded civil twilight region\ncivilBox:{type:'box',xMin:sunsetCivil.getTime(),xMax:sunriseCivil.getTime(),yMin:0,yMax:90,backgroundColor:'rgba(0,0,0,0.1)',drawTime:'beforeDatasetsDraw'},// Fill below minimum altitude line (red zone)\nminAltFill:{type:'box',xMin:sunsetNight.getTime(),xMax:sunriseNight.getTime(),yMin:0,yMax:target_minalt,backgroundColor:'rgba(255,0,0,0.3)',drawTime:'beforeDatasetsDraw',label:{enabled:true,content:'Observation limit',position:'center',yAdjust:-50,font:{weight:'bold',size:12},color:'darkred'}},// Add a text annotation with criteria\ncriteriaText:{type:'label',xValue:new Date(sunsetNight.getTime()-0.7*3600000),// 0.7 hours before night start\nyValue:80,backgroundColor:'rgba(255,255,255,0.7)',borderColor:'black',borderWidth:1,color:'black',font:{size:10,weight:'bold'},textAlign:'left',content:[\"Current observation criteria:\",\"- Altitude > \".concat(target_minalt,\" deg\"),\"- Moon separation > \".concat(target_minmoonsep,\" deg\")]}};// If the chart instance exists, update data and annotations\nif(staraltChartRef.current._chart){const chart=staraltChartRef.current._chart;chart.data.datasets=[sunDataset,moonDataset,targetDataset];chart.options.plugins.title.text=objname?\"Altitude of \".concat(objname):'Altitude of the Target';chart.options.plugins.annotation.annotations=annotations;chart.update();}else{// Otherwise, create a new chart\nconst ctx=staraltChartRef.current.getContext('2d');const chart=new ChartJS(ctx,{type:'line',data:{datasets:[sunDataset,moonDataset,targetDataset]},options:{responsive:true,maintainAspectRatio:false,// Allow the chart to fill its container\nlayout:{padding:10},scales:{x:{type:'time',time:{unit:'hour'},title:{display:true,text:'Time (UTC)'}},y:{title:{display:true,text:'Altitude [deg]'},min:0,max:90}},plugins:{title:{display:true,text:objname?\"Altitude of \".concat(objname):'Altitude of the Target'},legend:{display:true,position:'chartArea',labels:{boxWidth:10,boxHeight:10,padding:10}},tooltip:{mode:'nearest',intersect:false},annotation:{annotations:annotations}},interaction:{mode:'nearest',intersect:false}}});staraltChartRef.current._chart=chart;}},[staraltData,isStaraltCollapsed]);useEffect(()=>{if(!chartRef.current)return;const ctx=chartRef.current.getContext('2d');let wavelengthChart=ChartJS.getChart(ctx);if(!wavelengthChart){wavelengthChart=new ChartJS(ctx,{type:'scatter',data:{labels:[''],datasets:[]},options:{responsive:true,maintainAspectRatio:false,scales:{x:{type:'linear',min:3500,max:9500,title:{display:false}},y:{display:false}},plugins:{legend:{display:false}}},plugins:[{id:'customSpans',beforeDraw:chart=>{const ctx=chart.ctx;const xScale=chart.scales.x;wavelengths.forEach(wav=>{const xMin=xScale.getPixelForValue((wav-12.5)*10);const xMax=xScale.getPixelForValue((wav+12.5)*10);const xCenter=xScale.getPixelForValue(wav*10);// Create gradient\nconst gradient=ctx.createLinearGradient(xMin,0,xMax,0);gradient.addColorStop(0,'black');gradient.addColorStop(0.1,'darkgreen');gradient.addColorStop(0.5,'green');gradient.addColorStop(0.9,'darkgreen');gradient.addColorStop(1,'black');// Draw the gradient span\nctx.fillStyle=gradient;ctx.fillRect(xMin,chart.chartArea.top,xMax-xMin,chart.chartArea.bottom-chart.chartArea.top);// Draw the center line\nctx.strokeStyle='darkgreen';// You can change the color as needed\nctx.beginPath();ctx.moveTo(xCenter,chart.chartArea.top);ctx.lineTo(xCenter,chart.chartArea.bottom);ctx.stroke();// Draw the horizontal center line\nconst yCenter=(chart.chartArea.top+chart.chartArea.bottom)/2;ctx.beginPath();ctx.moveTo(xMin,yCenter);ctx.lineTo(xMax,yCenter);ctx.stroke();});}}]});}else{wavelengthChart.data.datasets=[];wavelengthChart.update();}return()=>{var _wavelengthChart;return(_wavelengthChart=wavelengthChart)===null||_wavelengthChart===void 0?void 0:_wavelengthChart.destroy();};},[wavelengths,obsmode,isCollapsed]);useEffect(()=>{const interval=setInterval(()=>{setLocalTime(moment().tz(\"America/Santiago\").format('YYYY-MM-DD HH:mm:ss'));},1000);return()=>clearInterval(interval);},[]);useEffect(()=>{const fetchWeatherData=async()=>{try{const response=await axios.get('/api/weather');setWeatherData(response.data);}catch(error){console.error('Error fetching weather data:',error);}};fetchWeatherData();},[]);const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{await axios.post('http://127.0.0.1:5000/api/send_email',_objectSpread(_objectSpread(_objectSpread({requester,target,ra,dec,exposure,obsmode,comments,abortObservation},detailedSettings),obsmode==='Deep'&&{selectedFilters,selectedTelNumber}),obsmode==='Spec'&&{selectedSpecFile}));setSuccessMessage('Email sent successfully!');setError('');setIsDialogOpen(false);// Close dialog on success\n}catch(error){setError('Failed to send the email. Please try again.');}finally{setIsLoading(false);// Stop loading\n}};const handleInputChange=(event,value)=>{setTarget(value);const selectedTarget=targets.find(t=>t.name===value);if(selectedTarget){setRa(selectedTarget.ra);setDec(selectedTarget.dec);setIsCustomTarget(false);}else{setRa('');setDec('');setIsCustomTarget(true);}};const handleExposureChange=newExposure=>{const{imageCount}=detailedSettings;const newSingleFrameExposure=newExposure/imageCount;setDetailedSettings(prev=>_objectSpread(_objectSpread({},prev),{},{singleFrameExposure:newSingleFrameExposure}));setExposure(newExposure);};const handleBlur=()=>{// Remove leading zeros unless they are part of a decimal number\nconst trimmedExposure=exposure.replace(/^0+(?=\\d)/,'').replace(/^0*(\\.\\d+)/,'0$1');setExposure(trimmedExposure);};const handleCheckboxChange=filter=>{setSelectedFilters(prev=>prev.includes(filter)?prev.filter(item=>item!==filter)// Remove filter if unchecked\n:[...prev,filter]// Add filter if checked\n);};const toggleCollapse=()=>{setIsCollapsed(!isCollapsed);};const toggleDetailCollapse=()=>{setIsDetailCollapsed(!isDetailCollapsed);};const toggleStaraltCollapse=()=>{setIsStaraltCollapsed(!isStaraltCollapsed);};const toggleDialog=()=>{// Validate required fields\nif(!ra||!dec||!requester||!target){setError('Fill all required fields: Requester, Target, R.A., Dec.');return;}// Validate email format\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(requester)){setError('Please enter a valid email address.');return;}// Check if the target is observable\nconst isObservable=staraltData.color_target.includes('g');if(!isObservable){setError('The entered RA and DEC are not in any observable conditions. Check the visibility plot.');return;}setIsDialogOpen(!isDialogOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"observing-conditions-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"observing-conditions-header\",children:/*#__PURE__*/_jsx(\"label\",{className:\"status-text\",children:\"Observing Status Overview\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"observing-conditions-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"default-label\",children:\"Telescope:\"}),/*#__PURE__*/_jsx(CircleIcon,{className:\"status-icon \".concat(telescopesOnline>0?'online':'offline')}),\"(\",telescopesOnline,\" online)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"default-label\",children:\"Weather:\"}),/*#__PURE__*/_jsx(\"div\",{\"data-tooltip-id\":\"status-tooltip\",\"data-tooltip-content\":\"Humidity: \".concat((_weatherData$humidity=weatherData===null||weatherData===void 0?void 0:weatherData.humidity)!==null&&_weatherData$humidity!==void 0?_weatherData$humidity:'N/A',\"%<br>\\n                                Rainrate: \").concat((_weatherData$rainrate=weatherData===null||weatherData===void 0?void 0:weatherData.rainrate)!==null&&_weatherData$rainrate!==void 0?_weatherData$rainrate:'N/A',\" mm/h<br>\\n                                Skybrightness: \").concat((_weatherData$skybrigh=weatherData===null||weatherData===void 0?void 0:weatherData.skybrightness)!==null&&_weatherData$skybrigh!==void 0?_weatherData$skybrigh:'N/A',\" mag/arcsec\\xB2<br>\\n                                Temperature: \").concat((_weatherData$temperat=weatherData===null||weatherData===void 0?void 0:weatherData.temperature)!==null&&_weatherData$temperat!==void 0?_weatherData$temperat:'N/A',\" \\xB0C<br>\\n                                Windspeed: \").concat((_weatherData$windspee=weatherData===null||weatherData===void 0?void 0:weatherData.windspeed)!==null&&_weatherData$windspee!==void 0?_weatherData$windspee:'N/A',\" m/s\"),style:{whiteSpace:'pre-wrap'},children:/*#__PURE__*/_jsx(CircleIcon,{className:\"status-icon \".concat(weatherData!==null&&weatherData!==void 0&&weatherData.is_safe?'online':'offline')})}),/*#__PURE__*/_jsx(ReactTooltip,{\"data-html\":true,insecure:true,multiline:true,id:\"tt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"local-time\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"default-label\",children:\"Local Time:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"time-text\",children:localTime}),/*#__PURE__*/_jsx(\"span\",{className:\"location-text\",children:\"(R\\xEDo Hurtado, Coquimbo, Chile)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"Requester:\"}),/*#__PURE__*/_jsx(TextField,{label:\"Your email address\",variant:\"outlined\",value:requester,onChange:e=>setRequester(e.target.value),fullWidth:true,className:\"input-field\",size:\"small\",type:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"Target:\"}),/*#__PURE__*/_jsx(Autocomplete,{options:targets,getOptionLabel:option=>option.name||'',inputValue:target,onInputChange:handleInputChange,renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Target\",variant:\"outlined\",fullWidth:true,size:\"small\",required:true})),freeSolo:true,className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"R.A.:\"}),/*#__PURE__*/_jsx(TextField,{label:\"hh:mm:ss or degrees\",variant:\"outlined\",value:ra,onChange:e=>setRa(e.target.value),fullWidth:true,disabled:!isCustomTarget,className:\"input-field\",size:\"small\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"Dec.:\"}),/*#__PURE__*/_jsx(TextField,{label:\"dd:mm:ss or degrees\",variant:\"outlined\",value:dec,onChange:e=>setDec(e.target.value),fullWidth:true,disabled:!isCustomTarget,className:\"input-field\",size:\"small\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"Exposure:\"}),/*#__PURE__*/_jsx(TextField,{label:\"seconds\",variant:\"outlined\",value:exposure,onChange:e=>handleExposureChange(e.target.value||0),fullWidth:true,className:\"input-field\",size:\"small\",type:\"number\",onBlur:handleBlur,inputProps:{step:0.1}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-container\",style:{justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"ObsMode:\"}),/*#__PURE__*/_jsxs(RadioGroup,{row:true,value:obsmode,onChange:e=>setObsmode(e.target.value),className:\"radio-group\",children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"Spec\",control:/*#__PURE__*/_jsx(Radio,{}),label:/*#__PURE__*/_jsx(\"span\",{className:\"bold-label\",children:\"Spec\"})}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"Deep\",control:/*#__PURE__*/_jsx(Radio,{}),label:/*#__PURE__*/_jsx(\"span\",{className:\"bold-label\",children:\"Deep\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",onClick:toggleCollapse,children:[isCollapsed?/*#__PURE__*/_jsx(ExpandMoreIcon,{}):/*#__PURE__*/_jsx(ExpandLessIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:isCollapsed?'Expand':'Collapse'})]})]}),!isCollapsed&&/*#__PURE__*/_jsxs(_Fragment,{children:[obsmode==='Spec'&&/*#__PURE__*/_jsx(SpecMode,{specFileOptions:specFileOptions,selectedSpecFile:selectedSpecFile,setSelectedSpecFile:setSelectedSpecFile,chartRef:chartRef,filters:filters}),obsmode==='Deep'&&/*#__PURE__*/_jsx(DeepMode,{selectedFilters:selectedFilters,handleCheckboxChange:handleCheckboxChange,selectedTelNumber:selectedTelNumber,setSelectedTelNumber:setSelectedTelNumber})]}),/*#__PURE__*/_jsx(\"label\",{className:\"default-label\",children:\"Comments:\"}),/*#__PURE__*/_jsx(TextField,{label:\"Any additional information\",variant:\"outlined\",value:comments,onChange:e=>setComments(e.target.value),fullWidth:true,className:\"input-field\",size:\"small\"}),/*#__PURE__*/_jsx(\"div\",{className:\"group-container\",children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:abortObservation,onChange:e=>setAbortObservation(e.target.checked),color:\"primary\"}),style:{fontWeight:'bold'},label:/*#__PURE__*/_jsx(\"span\",{className:\"bold-label\",children:\"Abort Current Observation?\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",style:{marginBottom:\"0\"},onClick:toggleStaraltCollapse,children:[isStaraltCollapsed?/*#__PURE__*/_jsx(ExpandMoreIcon,{}):/*#__PURE__*/_jsx(ExpandLessIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:isStaraltCollapsed?'Show Visibility':'Hide Visibility'})]}),!isStaraltCollapsed&&/*#__PURE__*/_jsx(_Fragment,{children:staraltData&&/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'400px'},children:/*#__PURE__*/_jsx(\"canvas\",{ref:staraltChartRef,style:{width:'100%',height:'100%'}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse-toggle\",style:{marginTop:\"0\"},onClick:toggleDetailCollapse,children:[isDetailCollapsed?/*#__PURE__*/_jsx(ExpandMoreIcon,{}):/*#__PURE__*/_jsx(ExpandLessIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"collapse-text\",children:isDetailCollapsed?'Show Detailed Settings':'Hide Detailed Settings'})]}),!isDetailCollapsed&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(DetailedSettings,{detailedSettings:detailedSettings,setDetailedSettings:setDetailedSettings,exposure:exposure,setExposure:setExposure})}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"contained\",color:\"primary\",className:\"submit-button\",onClick:toggleDialog,children:\"Submit\"})]}),/*#__PURE__*/_jsxs(Dialog,{open:isDialogOpen,onClose:toggleDialog,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Confirm Submission\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Target:\"}),\" \",target]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"R.A.:\"}),\" \",ra]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dec.:\"}),\" \",dec]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Exposure:\"}),\" \",exposure,\" seconds\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ObsMode:\"}),\" \",obsmode,\" \",obsmode===\"Spec\"&&\"(\".concat(selectedSpecFile,\")\"),obsmode===\"Deep\"&&\"(Filters: \".concat(selectedFilters.join(\", \"),\" | Telescopes: \").concat(selectedTelNumber,\")\")]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Comments:\"}),\" \",comments]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Abort Current Observation:\"}),\" \",abortObservation?'Yes':'No']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Single Frame Exposure:\"}),\" \",detailedSettings.singleFrameExposure,\" seconds\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"# of Images:\"}),\" \",detailedSettings.imageCount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Priority:\"}),\" \",detailedSettings.priority]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gain:\"}),\" \",detailedSettings.gain]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Binning:\"}),\" \",detailedSettings.binning]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Observation Start Time:\"}),\" \",detailedSettings.obsStartTime]})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:toggleDialog,color:\"secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",color:\"primary\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):'Confirm'})]})]}),isLoading&&/*#__PURE__*/_jsx(Snackbar,{open:true,children:/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"Sending email... Please wait.\"})}),successMessage&&/*#__PURE__*/_jsx(Snackbar,{open:true,autoHideDuration:6000,onClose:()=>setSuccessMessage(''),children:/*#__PURE__*/_jsx(Alert,{severity:\"success\",onClose:()=>setSuccessMessage(''),children:successMessage})}),error&&/*#__PURE__*/_jsx(Snackbar,{open:true,autoHideDuration:6000,onClose:()=>setError(''),children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",onClose:()=>setError(''),children:error})})]});};export default TargetForm;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Autocomplete","Alert","TextField","Button","RadioGroup","FormControlLabel","Radio","Checkbox","Dialog","DialogTitle","DialogContent","DialogActions","Snackbar","CircularProgress","Chart","ChartJS","LinearScale","Title","Tooltip","ScatterController","LineController","LineElement","PointElement","CategoryScale","TimeScale","Legend","annotationPlugin","ExpandMoreIcon","ExpandLessIcon","SpecMode","DeepMode","DetailedSettings","CircleIcon","moment","ReactTooltip","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","TargetForm","_weatherData$humidity","_weatherData$rainrate","_weatherData$skybrigh","_weatherData$temperat","_weatherData$windspee","targets","setTargets","target","setTarget","ra","setRa","dec","setDec","exposure","setExposure","obsmode","setObsmode","comments","setComments","abortObservation","setAbortObservation","requester","setRequester","wavelengths","setWavelengths","filters","setFilters","specFileOptions","setSpecFileOptions","selectedSpecFile","setSelectedSpecFile","selectedFilters","setSelectedFilters","selectedTelNumber","setSelectedTelNumber","staraltData","setStaraltData","isCustomTarget","setIsCustomTarget","isCollapsed","setIsCollapsed","isDetailCollapsed","setIsDetailCollapsed","isStaraltCollapsed","setIsStaraltCollapsed","isDialogOpen","setIsDialogOpen","isLoading","setIsLoading","error","setError","successMessage","setSuccessMessage","detailedSettings","setDetailedSettings","singleFrameExposure","imageCount","priority","gain","binning","obsStartTime","telescopesOnline","setTelescopesOnline","localTime","setLocalTime","tz","format","weatherData","setWeatherData","chartRef","staraltChartRef","get","then","response","data","catch","console","concat","onlineTelescopes","table","filter","telescope","Status","length","raNum","parseFloat","decNum","isNaN","query","encodeURIComponent","fetch","json","log","current","objname","target_times","target_alts","moon_times","moon_alts","sun_times","sun_alts","color_target","tonight","target_minalt","target_minmoonsep","targetData","map","t","i","x","Date","y","moonData","sunData","mappedColorTarget","c","sunsetNight","sunset_night","sunriseNight","sunrise_night","sunsetCivil","sunset_civil","sunriseCivil","sunrise_civil","targetDataset","label","pointBackgroundColor","borderColor","showLine","pointRadius","moonDataset","backgroundColor","sunDataset","annotations","nightStartLine","type","xMin","getTime","xMax","borderWidth","enabled","content","position","yAdjust","nightEndLine","nightBox","yMin","yMax","drawTime","civilBox","minAltFill","font","weight","size","color","criteriaText","xValue","yValue","textAlign","_chart","chart","datasets","options","plugins","title","text","annotation","update","ctx","getContext","responsive","maintainAspectRatio","layout","padding","scales","time","unit","display","min","max","legend","labels","boxWidth","boxHeight","tooltip","mode","intersect","interaction","wavelengthChart","getChart","id","beforeDraw","xScale","forEach","wav","getPixelForValue","xCenter","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","chartArea","top","bottom","strokeStyle","beginPath","moveTo","lineTo","stroke","yCenter","_wavelengthChart","destroy","interval","setInterval","clearInterval","fetchWeatherData","handleSubmit","e","preventDefault","post","_objectSpread","handleInputChange","event","value","selectedTarget","find","name","handleExposureChange","newExposure","newSingleFrameExposure","prev","handleBlur","trimmedExposure","replace","handleCheckboxChange","includes","item","toggleCollapse","toggleDetailCollapse","toggleStaraltCollapse","toggleDialog","emailRegex","test","isObservable","className","children","onSubmit","humidity","rainrate","skybrightness","temperature","windspeed","style","whiteSpace","is_safe","insecure","multiline","variant","onChange","fullWidth","required","getOptionLabel","option","inputValue","onInputChange","renderInput","params","freeSolo","disabled","onBlur","inputProps","step","justifyContent","row","control","onClick","checked","fontWeight","marginBottom","width","height","ref","marginTop","open","onClose","join","severity","autoHideDuration"],"sources":["/Users/dtak/Research/ToO/frontend/src/components/TargetForm.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport '../styles/TargetForm.css';\nimport {\n    Autocomplete,\n    Alert,\n    TextField,\n    Button,\n    RadioGroup,\n    FormControlLabel,\n    Radio,\n    Checkbox,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Snackbar,\n    CircularProgress,\n} from '@mui/material';\n\nimport 'chartjs-adapter-date-fns';\n\nimport {\n    Chart as ChartJS,\n    LinearScale,\n    Title,\n    Tooltip,\n    ScatterController,\n    LineController,\n    LineElement,\n    PointElement,\n    CategoryScale,\n    TimeScale,\n    Legend\n} from 'chart.js';\nimport annotationPlugin from 'chartjs-plugin-annotation';\n\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport SpecMode from './SpecMode';\nimport DeepMode from './DeepMode';\nimport DetailedSettings from './DetailedSettings';\nimport CircleIcon from '@mui/icons-material/Circle';\nimport moment from 'moment-timezone';\nimport ReactTooltip from \"react-tooltip\";\n\n\nChartJS.register(\n    LinearScale,\n    Title,\n    Tooltip,\n    ScatterController,\n    LineController,\n    LineElement,\n    PointElement,\n    CategoryScale,\n    TimeScale,\n    Legend,\n    annotationPlugin\n);\n\nconst TargetForm = () => {\n    const [targets, setTargets] = useState([]);\n    const [target, setTarget] = useState('');\n    const [ra, setRa] = useState('');\n    const [dec, setDec] = useState('');\n    const [exposure, setExposure] = useState('300');\n    const [obsmode, setObsmode] = useState('Spec'); \n    const [comments, setComments] = useState('');\n    const [abortObservation, setAbortObservation] = useState(false); // Track checkbox state\n    const [requester, setRequester] = useState(''); // Track requester email\n\n    const [wavelengths, setWavelengths] = useState([]);\n    const [filters, setFilters] = useState([]);\n    const [specFileOptions, setSpecFileOptions] = useState(['specall.specmode']);\n    const [selectedSpecFile, setSelectedSpecFile] = useState('specall.specmode');\n    const [selectedFilters, setSelectedFilters] = useState(['g']); // For checkboxes\n    const [selectedTelNumber, setSelectedTelNumber] = useState(10); // For dropdown\n    const [staraltData, setStaraltData] = useState(null);\n\n    const [isCustomTarget, setIsCustomTarget] = useState(true);\n    const [isCollapsed, setIsCollapsed] = useState(true); // Collapse state for mode options\n    const [isDetailCollapsed, setIsDetailCollapsed] = useState(true); // Collapse state for mode options\n    const [isStaraltCollapsed, setIsStaraltCollapsed] = useState(false); // Collapse state for mode options\n    const [isDialogOpen, setIsDialogOpen] = useState(false); // Dialog state\n    const [isLoading, setIsLoading] = useState(false);\n\n    const [error, setError] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    \n\n    const [detailedSettings, setDetailedSettings] = useState({\n        singleFrameExposure: 60, // Default 60 seconds\n        imageCount: 5, // Default exposure time / 60\n        priority: 50, // Default 50\n        gain: 2750, // Default 2750\n        binning: 1, // Default 1\n        obsStartTime: '', // Default empty\n    });\n\n    const [telescopesOnline, setTelescopesOnline] = useState(0); // New state for telescope status\n    const [localTime, setLocalTime] = useState(moment().tz(\"America/Santiago\").format('YYYY-MM-DD HH:mm:ss'));\n    const [weatherData, setWeatherData] = useState(null);\n\n    const chartRef = useRef(null);\n    const staraltChartRef = useRef(null);\n    \n\n    useEffect(() => {\n        axios\n            .get('/api/targets')\n            .then((response) => setTargets(response.data))\n            .catch((error) => console.error('Error fetching targets:', error));\n    }, []);\n\n    useEffect(() => {\n        if (obsmode === 'Spec') {\n            axios\n                .get('/api/spec-options')\n                .then((response) => setSpecFileOptions(response.data))\n                .catch((error) => console.error('Error fetching spec file options:', error));\n        }\n    }, [obsmode]);\n\n    useEffect(() => {\n        if (selectedSpecFile) {\n            axios\n                .get(`/api/spec-file?file=${selectedSpecFile}`)\n                .then((response) => {\n                    setWavelengths(response.data.wavelengths);\n                    setFilters(response.data.filters);\n                })\n                .catch((error) => console.error('Error fetching spec file data:', error));\n        }\n    }, [selectedSpecFile]);\n\n    useEffect(() => {\n        axios\n            .get('/api/status')\n            .then((response) => {\n                const onlineTelescopes = response.data.table.filter(telescope => telescope.Status !== 'offline').length;\n                setTelescopesOnline(onlineTelescopes);\n            })\n            .catch((error) => console.error('Error fetching telescope status:', error));\n    }, []);\n\n    useEffect(() => {\n        const raNum = parseFloat(ra);\n        const decNum = parseFloat(dec);\n        if (!isNaN(raNum) && !isNaN(decNum)) {\n            const query = `ra=${raNum}&dec=${decNum}&objname=${encodeURIComponent(target)}&target_minalt=30&target_minmoonsep=40`;\n            fetch(`/api/staralt_data?${query}`)\n                .then((response) => response.json())\n                .then((data) => {\n                    setStaraltData(data);\n                    console.log(\"Received staralt data:\", data);\n                })\n                .catch((error) => console.error(\"Error fetching staralt data:\", error));\n        }\n    }, [ra, dec, target]);\n\n    useEffect(() => {\n        if (!staraltData || !staraltChartRef.current) return;\n\n        const {\n            objname,\n            target_times, target_alts,\n            moon_times, moon_alts,\n            sun_times, sun_alts,\n            color_target,\n            tonight,\n            target_minalt,\n            target_minmoonsep\n        } = staraltData;\n\n        // Convert times to Date objects\n        const targetData = target_times.map((t, i) => ({ x: new Date(t), y: target_alts[i] }));\n        const moonData = moon_times.map((t, i) => ({ x: new Date(t), y: moon_alts[i] }));\n        const sunData = sun_times.map((t, i) => ({ x: new Date(t), y: sun_alts[i] }));\n\n        // Map color codes to CSS colors\n        const mappedColorTarget = color_target.map(c => {\n            if (c === 'r') return 'red';\n            if (c === 'k') return 'black';\n            if (c === 'g') return 'green';\n            return c; // fallback if needed\n        });\n\n        // Convert night times to Date objects\n        const sunsetNight = new Date(tonight.sunset_night);\n        const sunriseNight = new Date(tonight.sunrise_night);\n        const sunsetCivil = new Date(tonight.sunset_civil);\n        const sunriseCivil = new Date(tonight.sunrise_civil);\n\n        const targetDataset = {\n            label: 'Target',\n            data: targetData,\n            pointBackgroundColor: mappedColorTarget,\n            borderColor: 'black',\n            showLine: false,\n            pointRadius: 2\n        };\n\n        const moonDataset = {\n            label: 'Moon',\n            data: moonData,\n            borderColor: 'blue',\n            backgroundColor: 'blue',\n            showLine: false,\n            pointRadius: 1\n        };\n\n        const sunDataset = {\n            label: 'Sun',\n            data: sunData,\n            borderColor: 'red',\n            backgroundColor: 'red',\n            showLine: false,\n            pointRadius: 1\n        };\n\n        const annotations = {\n            // Vertical line at night start\n            nightStartLine: {\n                type: 'line',\n                xMin: sunsetNight.getTime(),\n                xMax: sunsetNight.getTime(),\n                borderColor: 'black',\n                borderWidth: 1,\n                label: {\n                    enabled: true,\n                    content: 'Night start',\n                    position: 'start',\n                    yAdjust: -20\n                }\n            },\n            // Vertical line at night end\n            nightEndLine: {\n                type: 'line',\n                xMin: sunriseNight.getTime(),\n                xMax: sunriseNight.getTime(),\n                borderColor: 'black',\n                borderWidth: 1,\n                label: {\n                    enabled: true,\n                    content: 'Night end',\n                    position: 'start',\n                    yAdjust: -20\n                }\n            },\n            // Shaded nighttime region\n            nightBox: {\n                type: 'box',\n                xMin: sunsetNight.getTime(),\n                xMax: sunriseNight.getTime(),\n                yMin: 0,\n                yMax: 90,\n                backgroundColor: 'rgba(0,0,0,0.3)',\n                drawTime: 'beforeDatasetsDraw'\n            },\n            // Shaded civil twilight region\n            civilBox: {\n                type: 'box',\n                xMin: sunsetCivil.getTime(),\n                xMax: sunriseCivil.getTime(),\n                yMin: 0,\n                yMax: 90,\n                backgroundColor: 'rgba(0,0,0,0.1)',\n                drawTime: 'beforeDatasetsDraw'\n            },\n            // Fill below minimum altitude line (red zone)\n            minAltFill: {\n                type: 'box',\n                xMin: sunsetNight.getTime(),\n                xMax: sunriseNight.getTime(),\n                yMin: 0,\n                yMax: target_minalt,\n                backgroundColor: 'rgba(255,0,0,0.3)',\n                drawTime: 'beforeDatasetsDraw',\n                label: {\n                    enabled: true,\n                    content: 'Observation limit',\n                    position: 'center',\n                    yAdjust: -50,\n                    font: { weight: 'bold', size: 12 },\n                    color: 'darkred'\n                }\n            },\n            // Add a text annotation with criteria\n            criteriaText: {\n                type: 'label',\n                xValue: new Date(sunsetNight.getTime() - 0.7 * 3600000), // 0.7 hours before night start\n                yValue: 80,\n                backgroundColor: 'rgba(255,255,255,0.7)',\n                borderColor: 'black',\n                borderWidth: 1,\n                color: 'black',\n                font: { size: 10, weight: 'bold' },\n                textAlign: 'left',\n                content: [\n                    `Current observation criteria:`,\n                    `- Altitude > ${target_minalt} deg`,\n                    `- Moon separation > ${target_minmoonsep} deg`\n                ]\n            }\n        };\n\n        // If the chart instance exists, update data and annotations\n        if (staraltChartRef.current._chart) {\n            const chart = staraltChartRef.current._chart;\n            chart.data.datasets = [sunDataset, moonDataset, targetDataset];\n            chart.options.plugins.title.text = objname ? `Altitude of ${objname}` : 'Altitude of the Target';\n            chart.options.plugins.annotation.annotations = annotations;\n            chart.update();\n        } else {\n            // Otherwise, create a new chart\n            const ctx = staraltChartRef.current.getContext('2d');\n            const chart = new ChartJS(ctx, {\n                type: 'line',\n                data: {\n                    datasets: [sunDataset, moonDataset, targetDataset]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false, // Allow the chart to fill its container\n                    layout: {\n                        padding: 10\n                    },\n                    scales: {\n                        x: {\n                            type: 'time',\n                            time: {\n                                unit: 'hour'\n                            },\n                            title: {\n                                display: true,\n                                text: 'Time (UTC)'\n                            }\n                        },\n                        y: {\n                            title: {\n                                display: true,\n                                text: 'Altitude [deg]'\n                            },\n                            min: 0,\n                            max: 90\n                        }\n                    },\n                    plugins: {\n                        title: {\n                            display: true,\n                            text: objname ? `Altitude of ${objname}` : 'Altitude of the Target',\n                        },\n                        legend: {\n                            display: true,\n                            position: 'chartArea',\n                            labels: {\n                                boxWidth: 10,\n                                boxHeight: 10,\n                                padding: 10,\n                            }\n                        },\n                        tooltip: {\n                            mode: 'nearest',\n                            intersect: false\n                        },\n                        annotation: {\n                            annotations: annotations\n                        }\n                    },\n                    interaction: {\n                        mode: 'nearest',\n                        intersect: false\n                    }\n                }\n            });\n            staraltChartRef.current._chart = chart;\n        }\n    }, [staraltData, isStaraltCollapsed]);\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const ctx = chartRef.current.getContext('2d');\n        let wavelengthChart = ChartJS.getChart(ctx);\n\n        if (!wavelengthChart) {\n            wavelengthChart = new ChartJS(ctx, {\n                type: 'scatter',\n                data: { labels: [''], datasets: [] },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        x: { type: 'linear', min: 3500, max: 9500, title: { display: false } },\n                        y: { display: false },\n                    },  \n                    plugins: { legend: { display: false } },\n                },\n                plugins: [\n                    {\n                        id: 'customSpans',\n                        beforeDraw: (chart) => {\n                            const ctx = chart.ctx;\n                            const xScale = chart.scales.x;\n                            wavelengths.forEach((wav) => {\n                                const xMin = xScale.getPixelForValue((wav - 12.5) * 10);\n                                const xMax = xScale.getPixelForValue((wav + 12.5) * 10);\n                                const xCenter = xScale.getPixelForValue(wav * 10);\n                                \n                                // Create gradient\n                                const gradient = ctx.createLinearGradient(xMin, 0, xMax, 0);\n                                gradient.addColorStop(0, 'black');\n                                gradient.addColorStop(0.1, 'darkgreen');\n                                gradient.addColorStop(0.5, 'green');\n                                gradient.addColorStop(0.9, 'darkgreen');\n                                gradient.addColorStop(1, 'black');\n\n                                // Draw the gradient span\n                                ctx.fillStyle = gradient;\n                                ctx.fillRect(\n                                    xMin,\n                                    chart.chartArea.top,\n                                    xMax - xMin,\n                                    chart.chartArea.bottom - chart.chartArea.top\n                                );\n                                // Draw the center line\n                                ctx.strokeStyle = 'darkgreen'; // You can change the color as needed\n                                ctx.beginPath();\n                                ctx.moveTo(xCenter, chart.chartArea.top);\n                                ctx.lineTo(xCenter, chart.chartArea.bottom);\n                                ctx.stroke();\n                                \n                                // Draw the horizontal center line\n                                const yCenter = (chart.chartArea.top + chart.chartArea.bottom) / 2;\n                                ctx.beginPath();\n                                ctx.moveTo(xMin, yCenter);\n                                ctx.lineTo(xMax, yCenter);\n                                ctx.stroke();\n                            });\n                        },\n                    },\n                ],\n            });\n        } else {\n            wavelengthChart.data.datasets = [];\n            wavelengthChart.update();\n        }\n\n        return () => wavelengthChart?.destroy();\n    }, [wavelengths, obsmode, isCollapsed]);\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setLocalTime(moment().tz(\"America/Santiago\").format('YYYY-MM-DD HH:mm:ss'));\n        }, 1000);\n\n        return () => clearInterval(interval);\n    }, []);\n\n    useEffect(() => {\n        const fetchWeatherData = async () => {\n            try {\n                const response = await axios.get('/api/weather');\n                setWeatherData(response.data);\n            } catch (error) {\n                console.error('Error fetching weather data:', error);\n            }\n        };\n\n        fetchWeatherData();\n    }, []);\n\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        setIsLoading(true);\n        setError('');\n\n        try {\n            await axios.post('http://127.0.0.1:5000/api/send_email', {\n                requester,\n                target,\n                ra,\n                dec,\n                exposure,\n                obsmode,\n                comments,\n                abortObservation,\n                ...detailedSettings,\n                ...(obsmode === 'Deep' && { selectedFilters, selectedTelNumber }),\n                ...(obsmode === 'Spec' && { selectedSpecFile })\n            });\n            setSuccessMessage('Email sent successfully!');\n            setError('');\n            setIsDialogOpen(false); // Close dialog on success\n        } catch (error) {\n            setError('Failed to send the email. Please try again.');\n        } finally {\n            setIsLoading(false); // Stop loading\n        }\n    };\n\n    const handleInputChange = (event, value) => {\n        setTarget(value);\n        const selectedTarget = targets.find((t) => t.name === value);\n        if (selectedTarget) {\n            setRa(selectedTarget.ra);\n            setDec(selectedTarget.dec);\n            setIsCustomTarget(false);\n        } else {\n            setRa('');\n            setDec('');\n            setIsCustomTarget(true);\n        }\n    };\n\n    const handleExposureChange = (newExposure) => {\n        const { imageCount } = detailedSettings;\n        const newSingleFrameExposure = newExposure / imageCount;\n        setDetailedSettings((prev) => ({\n            ...prev,\n            singleFrameExposure: newSingleFrameExposure,\n        }));\n        setExposure(newExposure);\n    };\n\n    const handleBlur = () => {\n        // Remove leading zeros unless they are part of a decimal number\n        const trimmedExposure = exposure.replace(/^0+(?=\\d)/, '').replace(/^0*(\\.\\d+)/, '0$1');\n        setExposure(trimmedExposure);\n    };\n\n\n    const handleCheckboxChange = (filter) => {\n        setSelectedFilters((prev) =>\n            prev.includes(filter)\n                ? prev.filter((item) => item !== filter) // Remove filter if unchecked\n                : [...prev, filter] // Add filter if checked\n        );\n    };\n    \n    const toggleCollapse = () => {\n        setIsCollapsed(!isCollapsed);\n    };\n\n    const toggleDetailCollapse = () => {\n        setIsDetailCollapsed(!isDetailCollapsed);\n    };\n\n    const toggleStaraltCollapse = () => {\n        setIsStaraltCollapsed(!isStaraltCollapsed);\n    };\n\n    const toggleDialog = () => {\n        // Validate required fields\n        if (!ra || !dec || !requester || !target) {\n            setError('Fill all required fields: Requester, Target, R.A., Dec.');\n            return;\n        }\n\n        // Validate email format\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(requester)) {\n            setError('Please enter a valid email address.');\n            return;\n        }\n\n        // Check if the target is observable\n        const isObservable = staraltData.color_target.includes('g');\n        if (!isObservable) {\n            setError('The entered RA and DEC are not in any observable conditions. Check the visibility plot.');\n            return;\n        }\n\n        setIsDialogOpen(!isDialogOpen);\n    };\n\n    return (\n        <div className=\"container\">\n            <form onSubmit={handleSubmit} className=\"form\">\n                <div className=\"observing-conditions-box\">\n                    \n                    <div className=\"observing-conditions-header\">\n                        <label className=\"status-text\">Observing Status Overview</label>\n                    </div>\n                    <div className=\"observing-conditions-content\">\n                        <div className=\"status-indicator\">\n                            <span className=\"default-label\">Telescope:</span>\n                            <CircleIcon className={`status-icon ${telescopesOnline > 0 ? 'online' : 'offline'}`} />\n                            ({telescopesOnline} online)\n                        </div>\n                        <div className=\"status-indicator\">\n                            <span className=\"default-label\">Weather:</span>\n                            <div data-tooltip-id=\"status-tooltip\" \n                                data-tooltip-content={`Humidity: ${weatherData?.humidity ?? 'N/A'}%<br>\n                                Rainrate: ${weatherData?.rainrate ?? 'N/A'} mm/h<br>\n                                Skybrightness: ${weatherData?.skybrightness ?? 'N/A'} mag/arcsec²<br>\n                                Temperature: ${weatherData?.temperature ?? 'N/A'} °C<br>\n                                Windspeed: ${weatherData?.windspeed ?? 'N/A'} m/s`}\n                                style={{ whiteSpace: 'pre-wrap' }}>\n                                <CircleIcon className={`status-icon ${weatherData?.is_safe ? 'online' : 'offline'}`} />\n                            </div>\n                            <ReactTooltip\n                                data-html={true}\n                                insecure={true}\n                                multiline={true}\n                                id=\"tt\"\n                            />\n                        </div>\n                        <div className=\"local-time\">\n                            <span className=\"default-label\">Local Time:</span>\n                            <span className=\"time-text\">{localTime}</span>\n                            <span className=\"location-text\">(Río Hurtado, Coquimbo, Chile)</span>\n                        </div>\n                    </div>\n                    \n                </div>\n                \n                <div className=\"group-container\">\n                    <label className=\"default-label\">Requester:</label>\n                    <TextField\n                        label=\"Your email address\"\n                        variant=\"outlined\"\n                        value={requester}\n                        onChange={(e) => setRequester(e.target.value)}\n                        fullWidth\n                        className=\"input-field\"\n                        size=\"small\"\n                        type=\"email\"\n                        required\n                    />\n                </div>\n                <div className=\"group-container\">\n                    <label className=\"default-label\">Target:</label>\n                    <Autocomplete\n                        options={targets}\n                        getOptionLabel={(option) => option.name || ''}\n                        inputValue={target}\n                        onInputChange={handleInputChange}\n                        renderInput={(params) => (\n                            <TextField {...params} label=\"Target\" variant=\"outlined\" fullWidth size=\"small\" required/>\n                        )}\n                        freeSolo\n                        className=\"input-field\"\n                    />\n                </div>\n                <div className=\"group-container\">\n                    <label className=\"default-label\">R.A.:</label>\n                    <TextField\n                        label=\"hh:mm:ss or degrees\"\n                        variant=\"outlined\"\n                        value={ra}\n                        onChange={(e) => setRa(e.target.value)}\n                        fullWidth\n                        disabled={!isCustomTarget} \n                        className=\"input-field\"\n                        size=\"small\"\n                        required\n                    />\n                </div>\n                <div className=\"group-container\">\n                    <label className=\"default-label\">Dec.:</label>\n                    <TextField\n                        label=\"dd:mm:ss or degrees\"\n                        variant=\"outlined\"\n                        value={dec}\n                        onChange={(e) => setDec(e.target.value)}\n                        fullWidth\n                        disabled={!isCustomTarget} \n                        className=\"input-field\"\n                        size=\"small\"\n                        required\n                    />\n                </div>\n                <div className=\"group-container\">\n                    <label className=\"default-label\">Exposure:</label>\n                    <TextField\n                        label=\"seconds\"\n                        variant=\"outlined\"\n                        value={exposure}\n                        onChange={(e) => handleExposureChange(e.target.value || 0)}\n                        fullWidth\n                        className=\"input-field\"\n                        size=\"small\"\n                        type=\"number\"\n                        onBlur={handleBlur}\n                        inputProps={{\n                            step: 0.1, \n                        }}\n                    />\n                </div>\n                <div className=\"group-container\" style={{justifyContent: 'space-between'}}>\n                    <label className=\"default-label\">ObsMode:</label>\n                    <RadioGroup\n                        row\n                        value={obsmode}\n                        onChange={(e) => setObsmode(e.target.value)}\n                        className=\"radio-group\"\n                    >   \n                        <FormControlLabel\n                            value=\"Spec\"\n                            control={<Radio />}\n                            label=<span className=\"bold-label\">Spec</span>\n                        />\n                        <FormControlLabel\n                            value=\"Deep\"\n                            control={<Radio />}\n                            label=<span className=\"bold-label\">Deep</span>\n                        />\n                    </RadioGroup>\n                    <div className=\"collapse-toggle\" onClick={toggleCollapse}>\n                        {isCollapsed ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                        <span className=\"collapse-text\">\n                            {isCollapsed ? 'Expand' : 'Collapse'}\n                        </span>\n                    </div>\n                </div>\n\n                {!isCollapsed && (\n                    <>\n                    {obsmode === 'Spec' && (\n                        <SpecMode\n                            specFileOptions={specFileOptions}\n                            selectedSpecFile={selectedSpecFile}\n                            setSelectedSpecFile={setSelectedSpecFile}\n                            chartRef={chartRef}\n                            filters={filters}\n                        />\n                    )}\n                    {obsmode === 'Deep' && (\n                        <DeepMode\n                            selectedFilters={selectedFilters}\n                            handleCheckboxChange={handleCheckboxChange}\n                            selectedTelNumber={selectedTelNumber}\n                            setSelectedTelNumber={setSelectedTelNumber}\n                        />\n                    )}\n                    </>\n                )}\n                \n                <label className=\"default-label\">Comments:</label>\n                <TextField\n                        label=\"Any additional information\"\n                        variant=\"outlined\"\n                        value={comments}\n                        onChange={(e) => setComments(e.target.value)}\n                        fullWidth\n                        className=\"input-field\"\n                        size=\"small\"\n                />\n\n                <div className=\"group-container\">\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={abortObservation}\n                                onChange={(e) => setAbortObservation(e.target.checked)}\n                                color=\"primary\"\n                            />\n                        }\n                        style={{fontWeight:'bold'}}\n                        label={<span className=\"bold-label\">Abort Current Observation?</span>}\n                    />\n                </div>\n\n                <div className=\"collapse-toggle\" style={{marginBottom: \"0\"}} onClick={toggleStaraltCollapse}>\n                    {isStaraltCollapsed ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                    <span className=\"collapse-text\">\n                        {isStaraltCollapsed ? 'Show Visibility' : 'Hide Visibility'}\n                    </span>\n                </div>\n                {/* Display staralt plot */}\n                {!isStaraltCollapsed && (\n                    <>\n                    {staraltData && (\n                        <div style={{ width: '100%', height: '400px' }}>\n                            <canvas ref={staraltChartRef} style={{ width: '100%', height: '100%' }}></canvas>\n                        </div>\n                    )}\n                    </>\n                )}\n\n                <div className=\"collapse-toggle\"  style={{marginTop: \"0\"}} onClick={toggleDetailCollapse}>\n                    {isDetailCollapsed ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n                    <span className=\"collapse-text\">\n                        {isDetailCollapsed ? 'Show Detailed Settings' : 'Hide Detailed Settings'}\n                    </span>\n                </div>\n\n                {!isDetailCollapsed && (\n                    <>\n                        <DetailedSettings\n                            detailedSettings={detailedSettings}\n                            setDetailedSettings={setDetailedSettings}\n                            exposure={exposure}\n                            setExposure={setExposure}\n                        />\n                    </>\n                )}\n\n                <Button\n                    type=\"button\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    className=\"submit-button\"\n                    onClick={toggleDialog}\n                >\n                    Submit\n                </Button>\n            </form>\n            <Dialog open={isDialogOpen} onClose={toggleDialog}>\n                <DialogTitle>Confirm Submission</DialogTitle>\n                <DialogContent>\n                    <p><strong>Target:</strong> {target}</p>\n                    <p><strong>R.A.:</strong> {ra}</p>\n                    <p><strong>Dec.:</strong> {dec}</p>\n                    <p><strong>Exposure:</strong> {exposure} seconds</p>\n                    <p>\n                        <strong>ObsMode:</strong> {obsmode}{\" \"}\n                        {obsmode === \"Spec\" && `(${selectedSpecFile})`}\n                        {obsmode === \"Deep\" && `(Filters: ${selectedFilters.join(\", \")} | Telescopes: ${selectedTelNumber})`}\n                    </p>\n                    <p><strong>Comments:</strong> {comments}</p>\n                    <p><strong>Abort Current Observation:</strong> {abortObservation ? 'Yes' : 'No'}</p>\n                    <p><strong>Single Frame Exposure:</strong> {detailedSettings.singleFrameExposure} seconds</p>\n                    <p><strong># of Images:</strong> {detailedSettings.imageCount}</p>\n                    <p><strong>Priority:</strong> {detailedSettings.priority}</p>\n                    <p><strong>Gain:</strong> {detailedSettings.gain}</p>\n                    <p><strong>Binning:</strong> {detailedSettings.binning}</p>\n                    <p><strong>Observation Start Time:</strong> {detailedSettings.obsStartTime}</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={toggleDialog} color=\"secondary\">\n                        Cancel\n                    </Button>\n                    <Button \n                        onClick={handleSubmit} \n                        variant=\"contained\" \n                        color=\"primary\"\n                        disabled={isLoading}\n                    >\n                        {isLoading ? <CircularProgress size={24} color=\"inherit\" /> : 'Confirm'}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n\n            {/* Loading Message */}\n            {isLoading && (\n                <Snackbar open>\n                    <Alert severity=\"info\">\n                        Sending email... Please wait.\n                    </Alert>\n                </Snackbar>\n            )}\n\n\n            {/* Success Message */}\n            {successMessage && (\n                <Snackbar open autoHideDuration={6000} onClose={() => setSuccessMessage('')}>\n                    <Alert severity=\"success\" onClose={() => setSuccessMessage('')}>\n                        {successMessage}\n                    </Alert>\n                </Snackbar>\n            )}\n\n            {/* Error Message */}\n            {error && (\n                <Snackbar open autoHideDuration={6000} onClose={() => setError('')}>\n                    <Alert severity=\"error\" onClose={() => setError('')}>\n                        {error}\n                    </Alert>\n                </Snackbar>\n            )}\n\n\n        </div>\n    );\n}\n\nexport default TargetForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}